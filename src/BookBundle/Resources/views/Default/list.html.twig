{% extends '@Book/base.html.twig' %}
{% block title %}
    {{ 'project.name'|trans }}
{% endblock %}
{% block body %}
    <h1>{{ 'project.name'|trans }}</h1>

    {% if is_granted('ROLE_USER') %}
        <a href="{{ path("create") }}">{{ 'book.add.link'|trans }}</a>
    {% endif %}

    {% for book in books %}
        <p>
            {{ book.author }}. {{ book.title }}
            {% if book.isDownloadAllowed and book.source %}
                <a href="{{ upload }}/{{ book.source }}" target="_blank">{{ 'book.download.link'|trans }}</a>
            {% endif %}

            {% if is_granted('ROLE_USER') %}
                <a href="{{ path("edit", {"id": book.id}) }}">{{ 'book.edit.link'|trans }}</a>
            {% endif %}

            {% if is_granted('ROLE_USER') %}
                <a href="{{ path("delete", {"id": book.id}) }}">{{ 'book.delete.link'|trans }}</a>
            {% endif %}
        </p>
        {% if book.cover %}
            {{ book.cover|resize_image(200, 300) }}
        {% else %}
            {{ default_img|resize_image }}
        {% endif %}
        <hr>
    {% endfor %}
{% endblock %}